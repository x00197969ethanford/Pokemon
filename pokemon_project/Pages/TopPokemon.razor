@page "/top12"
@using pokemon_project.Data
@inject PokemonService PokemonService

<h3>Top 10 Pok√©mon</h3>

<div class="card p-3 mb-3">
    <h5>Filter by Stats</h5>

    <div class="row g-2">
        <div class="col-6 col-md-3">
            <label>Min HP</label>
            <InputNumber @bind-Value="minHp" class="form-control" />
        </div>

        <div class="col-6 col-md-3">
            <label>Min Attack</label>
            <InputNumber @bind-Value="minAttack" class="form-control" />
        </div>

        <div class="col-6 col-md-3">
            <label>Min Defense</label>
            <InputNumber @bind-Value="minDefense" class="form-control" />
        </div>

        <div class="col-6 col-md-3">
            <label>Min Speed</label>
            <InputNumber @bind-Value="minSpeed" class="form-control" />
        </div>
    </div>

    <div class="mt-3">
        <label><strong>Sort by:</strong></label>
        <select class="form-select w-auto d-inline-block" @bind="sortBy">
            <option value="name">Name</option>
            <option value="hp">HP</option>
            <option value="attack">Attack</option>
            <option value="defense">Defense</option>
            <option value="speed">Speed</option>
            <option value="weight">Weight</option>
            <option value="height">Height</option>
        </select>
    </div>
</div>



@code {
    List<Pokemon> all = new();
    List<Pokemon> filtered = new();

    bool isLoading = true;

    int minHp = 0;
    int minAttack = 0;
    int minDefense = 0;
    int minSpeed = 0;

    string sortBy = "hp";
    bool sortAsc; 

    int Stat(Pokemon p, string statName)
    {
        foreach (PokemonStat data in p.Stats)
        {
            if (data.Stat.Name == statName)
            {
                return data.BaseStat;
            }
        }
        return 0;
    }

}